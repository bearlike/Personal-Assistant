{
  "repo_notes": [
    {
      "content": "Developer documentation only. Mirror the repo structure and module boundaries (packages/, apps/, meeseeks_ha_conversation/) with minimal redundancy. Every page must include a meaningful Mermaid diagram that matches the page purpose. Name exact classes/functions and module paths. Clarify that API exposes polling; CLI runs the runtime in-process (no polling). Focus on system behavior, abstractions, and integration contracts rather than usage tips."
    }
  ],
  "pages": [
    {
      "title": "Overview & Repo Map",
      "purpose": "Single entry point: repo goals, module boundaries, and top-level folder ownership in one place."
    },
    {
      "title": "Core Runtime & Orchestration (meeseeks_core)",
      "purpose": "How the shared core runtime and orchestration engine work; entry points and class boundaries.",
      "parent": "Overview & Repo Map"
    },
    {
      "title": "Session Runtime & Store",
      "purpose": "SessionRuntime, RunRegistry, SessionStore, and event log behavior (polling is API-only).",
      "parent": "Core Runtime & Orchestration (meeseeks_core)"
    },
    {
      "title": "Orchestration Engine",
      "purpose": "orchestrate_session, Orchestrator, ActionPlanRunner, and plan-act-observe-replan flow.",
      "parent": "Core Runtime & Orchestration (meeseeks_core)"
    },
    {
      "title": "LLM Abstraction",
      "purpose": "ChatModel protocol, build_chat_model, model routing, and reasoning-effort configuration.",
      "parent": "Core Runtime & Orchestration (meeseeks_core)"
    },
    {
      "title": "Context, Summaries, Compaction",
      "purpose": "ContextBuilder, summary persistence, and compaction behavior.",
      "parent": "Core Runtime & Orchestration (meeseeks_core)"
    },
    {
      "title": "Permissions, Hooks, Reflection",
      "purpose": "Approval callbacks, hook pipeline, and step reflection behavior.",
      "parent": "Core Runtime & Orchestration (meeseeks_core)"
    },
    {
      "title": "Core Data Models & Events",
      "purpose": "ActionStep, TaskQueue, OrchestrationState, EventRecord, and payload schemas.",
      "parent": "Core Runtime & Orchestration (meeseeks_core)"
    },
    {
      "title": "Tooling & Integrations (meeseeks_tools)",
      "purpose": "Tool layer boundaries and integration patterns for local tools and MCP.",
      "parent": "Overview & Repo Map"
    },
    {
      "title": "Tool Framework",
      "purpose": "ToolRegistry, ToolSpec, AbstractTool, and tool execution lifecycle.",
      "parent": "Tooling & Integrations (meeseeks_tools)"
    },
    {
      "title": "Local Tools (Aider adapters)",
      "purpose": "Edit-block tool flow, file tools, and shell tool behavior.",
      "parent": "Tooling & Integrations (meeseeks_tools)"
    },
    {
      "title": "MCP Integration",
      "purpose": "MCP config, discovery, schema validation, and manifest caching.",
      "parent": "Tooling & Integrations (meeseeks_tools)"
    },
    {
      "title": "API Project (meeseeks_api)",
      "purpose": "REST API boundaries and how it binds to SessionRuntime.",
      "parent": "Overview & Repo Map"
    },
    {
      "title": "API Endpoints & Polling",
      "purpose": "Session endpoints, async runs, and polling flow (API-only).",
      "parent": "API Project (meeseeks_api)"
    },
    {
      "title": "CLI Project (meeseeks_cli)",
      "purpose": "CLI flow, dialogs, in-process runtime usage, and command handling.",
      "parent": "Overview & Repo Map"
    },
    {
      "title": "Chat UI Project (meeseeks_chat)",
      "purpose": "Streamlit UI flow and integration with core runtime.",
      "parent": "Overview & Repo Map"
    },
    {
      "title": "Home Assistant Project (meeseeks_ha_conversation)",
      "purpose": "HA adapter flow and API interaction.",
      "parent": "Overview & Repo Map"
    },
    {
      "title": "Configuration & Runtime Settings",
      "purpose": "configs/app.json, configs/mcp.json, env layering, and runtime defaults.",
      "parent": "Overview & Repo Map"
    },
    {
      "title": "CI/CD & Docs Pipeline",
      "purpose": "CI checks, coverage gating, release automation, and docs generation; where pipeline logic lives in the repo.",
      "parent": "Overview & Repo Map"
    },
    {
      "title": "Testing & Quality",
      "purpose": "Integration-first test patterns, boundaries, and coverage targets from tests/AGENTS.md.",
      "parent": "Overview & Repo Map"
    },
    {
      "title": "Tracing & Diagnostics",
      "purpose": "Logging, Langfuse tracing, and error propagation paths.",
      "parent": "Overview & Repo Map"
    },
    {
      "title": "Client Extension Guide",
      "purpose": "How new clients extend SessionRuntime and core abstractions without duplicating logic.",
      "parent": "Overview & Repo Map"
    }
  ],
  "page_notes": [
    {
      "title": "Overview & Repo Map",
      "notes": "Mermaid: module map with subgraphs by top-level folder (packages/, apps/, meeseeks_ha_conversation/)."
    },
    {
      "title": "Core Runtime & Orchestration (meeseeks_core)",
      "notes": "Mermaid: runtime facade flow (SessionRuntime -> Orchestrator -> ActionPlanRunner) and how clients call it."
    },
    {
      "title": "Session Runtime & Store",
      "notes": "Mermaid: sequence for async run + JSONL event log + API polling (explicitly API-only); include RunRegistry and SessionStore."
    },
    {
      "title": "Orchestration Engine",
      "notes": "Mermaid: state machine for plan -> act -> observe -> replan -> respond; label orchestrate_session/Orchestrator/ActionPlanRunner."
    },
    {
      "title": "LLM Abstraction",
      "notes": "Mermaid: class diagram for ChatModel protocol and build_chat_model usage."
    },
    {
      "title": "Context, Summaries, Compaction",
      "notes": "Mermaid: data flow from EventRecord -> summary -> ContextBuilder snapshot."
    },
    {
      "title": "Permissions, Hooks, Reflection",
      "notes": "Mermaid: sequence diagram of tool call -> hooks -> permission -> tool result -> reflection."
    },
    {
      "title": "Core Data Models & Events",
      "notes": "Mermaid: class diagram for ActionStep, TaskQueue, OrchestrationState + EventRecord and payload variants."
    },
    {
      "title": "Tooling & Integrations (meeseeks_tools)",
      "notes": "Mermaid: ToolRegistry -> ToolSpec -> AbstractTool -> local/MCP implementations."
    },
    {
      "title": "Tool Framework",
      "notes": "Mermaid: class diagram with ToolRegistry, ToolSpec, AbstractTool, ActionStep."
    },
    {
      "title": "Local Tools (Aider adapters)",
      "notes": "Mermaid: sequence for edit-block tool (SEARCH/REPLACE) -> diff -> tool_result."
    },
    {
      "title": "MCP Integration",
      "notes": "Mermaid: flow from config -> discovery -> schema normalization -> registry."
    },
    {
      "title": "API Project (meeseeks_api)",
      "notes": "Mermaid: request flow from API handlers to SessionRuntime and SessionStore."
    },
    {
      "title": "API Endpoints & Polling",
      "notes": "Mermaid: sequence for /sessions, /query, /events polling (API-only)."
    },
    {
      "title": "CLI Project (meeseeks_cli)",
      "notes": "Mermaid: sync flow CLI -> SessionRuntime -> Orchestrator -> response (no polling)."
    },
    {
      "title": "Chat UI Project (meeseeks_chat)",
      "notes": "Mermaid: Streamlit UI flow -> SessionRuntime -> response."
    },
    {
      "title": "Home Assistant Project (meeseeks_ha_conversation)",
      "notes": "Mermaid: HA adapter -> API -> SessionRuntime -> tools."
    },
    {
      "title": "Configuration & Runtime Settings",
      "notes": "Mermaid: config resolution flow (configs/app.json, configs/mcp.json, env overrides)."
    },
    {
      "title": "CI/CD & Docs Pipeline",
      "notes": "Mermaid: pipeline flow (push/PR -> lint/tests -> coverage -> status checks) plus docs generation (docs/ + mkdocs.yml -> build -> deploy)."
    },
    {
      "title": "Testing & Quality",
      "notes": "Mermaid: test harness flow (fake tools/LLM boundary) covering full turn integration tests."
    },
    {
      "title": "Tracing & Diagnostics",
      "notes": "Mermaid: error propagation flow and tracing hooks to Langfuse."
    },
    {
      "title": "Client Extension Guide",
      "notes": "Mermaid: extension diagram for new client binding to SessionRuntime and ToolRegistry."
    }
  ]
}
